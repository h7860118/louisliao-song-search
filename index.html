<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>è·¯æ˜“æ–¯é‹¼ç´ç¨å¥è­œæŸ¥è©¢</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", "Microsoft JhengHei", sans-serif;
      background: #f5f7fb;
      color: #1f2933;
    }

    .page {
      max-width: 1100px;
      margin: 0 auto;
      padding: 24px 16px 80px;
    }

    /* ------------------ æ¨™é¡Œåˆ— ------------------ */
    .header-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 14px;
    }

    h1 {
      font-size: 28px;
      font-weight: 800;
      margin: 0;
      color: #0f172a;
    }

    /* ------------------ å®˜ç¶²è† å›Šï¼ˆæ·¡è— + glowï¼Œæ”¹æˆåµŒåœ¨ headerï¼‰ ------------------ */
    .brand-pill {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 10px 22px 11px;
      border-radius: 999px;

      background: linear-gradient(135deg, #f4f7ff 0%, #e4ecff 100%);
      border: 1px solid rgba(148,163,184,0.30);
      color: #0f172a;
      font-size: 15px;
      font-weight: 700;
      text-decoration: none;

      box-shadow: 0 10px 24px rgba(37,99,235,0.14);
      transition: all .2s ease;
      overflow: visible;
      position: relative; /* ç‚ºäº†æ”¾ glow */
    }

    .brand-pill::before {
      content: "";
      position: absolute;
      inset: -10px -20px;
      border-radius: inherit;
      background: radial-gradient(circle at center, rgba(164,191,255,0.40), rgba(164,191,255,0));
      filter: blur(8px);
      z-index: -1;
      opacity: 0.85;
      pointer-events: none;
    }

    .brand-pill:hover {
      transform: translateY(-2px);
      box-shadow: 0 16px 34px rgba(37,99,235,0.22);
      filter: brightness(1.03);
    }

    .brand-pill-logo {
      width: 28px;
      height: 28px;
      border-radius: 999px;
      background: #ffffff;
      overflow: hidden;
      flex-shrink: 0;
      box-shadow: 0 6px 14px rgba(37,99,235,.30);
    }

    .brand-pill-logo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    @media (max-width: 640px) {
      .page {
        padding-top: 20px;
      }

      .header-row {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
      }

      h1 {
        font-size: 24px;
      }

      .brand-pill {
        padding: 9px 18px;
        font-size: 14px;
      }

      .brand-pill-logo {
        width: 24px;
        height: 24px;
      }
    }

    /* ------------------ æœå°‹ UI ------------------ */
    .subtitle {
      font-size: 15px;
      color: #6b7280;
      margin-top: 8px;
      margin-bottom: 22px;
    }

    .search-row {
      display: flex;
      gap: 16px;
      align-items: stretch;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }
    .search-input-wrap {
      flex: 1 1 260px;
    }
    .search-input-wrap input {
      width: 100%;
      padding: 14px 16px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      font-size: 16px;
      outline: none;
    }
    .search-input-wrap input:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.2);
    }

    .search-btn {
      padding: 0 32px;
      border-radius: 999px;
      border: none;
      background: #2563eb;
      color: #fff;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
    }

    .tip {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 18px;
    }

    .status {
      font-size: 14px;
      color: #6b7280;
      margin-top: 8px;
    }

    .results {
      margin-top: 8px;
    }

    .result-count {
      font-size: 14px;
      color: #4b5563;
      margin-bottom: 8px;
    }

    .card {
      background: #ffffff;
      border-radius: 14px;
      padding: 16px;
      margin-bottom: 12px;
      border: 1px solid #e5e7eb;
      box-shadow: 0 8px 20px rgba(15,23,42,0.05);
    }

    .song-title {
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .links a {
      font-size: 14px;
      color: #2563eb;
      text-decoration: none;
      margin-right: 14px;
    }

    /* ------------------ LINE æµ®å‹•æŒ‰éˆ• + å°å¡ç‰‡ï¼ˆä½ çš„ç‰ˆæœ¬ä¿æŒä¸è®Šï¼‰ ------------------ */
    #lineFab {
      position: fixed;
      right: 22px;
      bottom: 22px;
      width: 58px;
      height: 58px;
      border-radius: 50%;
      z-index: 850;
      cursor: pointer;
      text-decoration: none;
    }

    .line-fab-inner {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background-color: #06C755;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 10px 24px rgba(0,0,0,.25);
      transition: transform .15s ease, box-shadow .15s ease;
    }

    #lineFab:hover .line-fab-inner {
      transform: translateY(-1px);
      box-shadow: 0 13px 28px rgba(0,0,0,.32);
    }

    #lineFab svg {
      width: 34px;
      height: 34px;
      display: block;
    }

    .line-modal-overlay {
      position: fixed;
      inset: 0;
      display: none;
      justify-content: flex-end;
      align-items: center;
      background: rgba(0,0,0,.25);
      z-index: 840;
    }

    .line-modal {
      width: 320px;
      max-width: 90vw;
      background: #ffffff;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
      margin-right: 22px;
    }

    .line-modal-header {
      background: #06C755;
      color: #ffffff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 10px 14px;
      font-size: 15px;
      font-weight: 600;
    }

    .line-modal-header-left {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .line-modal-logo-circle {
      width: 22px;
      height: 22px;
      border-radius: 50%;
      background: #ffffff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      color: #06C755;
      font-weight: 700;
    }

    .line-modal-close {
      border: none;
      background: transparent;
      color: #ffffff;
      font-size: 20px;
      line-height: 1;
      cursor: pointer;
      padding: 0 4px;
    }

    .line-modal-body {
      padding: 16px 18px 20px;
      text-align: center;
    }

    .line-modal-qr {
      width: 210px;
      height: 210px;
      object-fit: contain;
      display: block;
      margin: 0 auto 14px;
    }

    .line-modal-link {
      display: inline-block;
      font-size: 14px;
      color: #2563eb;
      text-decoration: none;
      word-break: break-all;
    }

    .line-modal-link:hover {
      text-decoration: underline;
    }

    @media (max-width: 640px) {
      .line-modal {
        margin-right: 12px;
      }
    }
  </style>
</head>

<body>

  <div class="page">
    <!-- æ¨™é¡Œ + å®˜ç¶²è† å›Šæ”¾åœ¨åŒä¸€åˆ— -->
    <div class="header-row">
      <h1>è·¯æ˜“æ–¯é‹¼ç´ç¨å¥è­œæŸ¥è©¢</h1>
      <a class="brand-pill" href="https://louisliaopiano.com" target="_blank" rel="noopener">
        <span class="brand-pill-logo">
          <img src="https://cdn.store-assets.com/s/715447/f/15885666.jpg" alt="LouisLiao Piano Logo" />
        </span>
        <span>LouisLiao Piano é‹¼ç´ç·¨æ›²</span>
      </a>
    </div>

    <div class="subtitle">
      è¼¸å…¥æ­Œåæˆ–æ¼”å”±è€…çš„ä¸€éƒ¨åˆ†å³å¯æ¨¡ç³Šæœå°‹ï¼Œä¾‹å¦‚ã€Œç«¥è©±ã€ã€Œå…‰è‰¯ã€ã€Œæ¶¼æ¶¼ã€ç­‰ã€‚
    </div>

    <div class="search-row">
      <div class="search-input-wrap">
        <input id="keyword" type="text" placeholder="è¼¸å…¥æ­Œåï¼æ¼”å”±è€…é—œéµå­—â€¦" />
      </div>
      <button id="searchBtn" class="search-btn">æœå°‹</button>
    </div>

    <div class="tip">
      ğŸ” å°ç§˜è¨£ï¼šå¯ä»¥ç”¨æ­Œåã€æ­Œæ‰‹ã€æˆ–éƒ¨åˆ†é—œéµå­—ä¾†æ‰¾ï¼Œä¾‹å¦‚ã€Œè˜‡æ°¸åº·ã€ã€Œé‡å›å‚·å¿ƒåœ°ã€ã€‚
    </div>

    <div id="status" class="status">ç›®å‰è¼‰å…¥ä¸­â€¦</div>
    <div id="results" class="results"></div>
  </div>

  <!-- LINE æµ®å‹•æŒ‰éˆ• -->
  <a id="lineFab" aria-label="åŠ å…¥ LINE å®˜æ–¹å¸³è™Ÿ">
    <div class="line-fab-inner">
      <svg viewBox="0 0 64 64" aria-hidden="true">
        <path
          d="M32 12C21 12 12 19.5 12 29c0 7.2 5.4 13.2 13.5 14.7L26 52l7.2-5.4C44 45.9 52 38.2 52 29 52 19.5 43 12 32 12z"
          fill="#ffffff"
        />
        <text x="32" y="33" text-anchor="middle"
              font-size="14" font-weight="700"
              fill="#06c755"
              font-family="-apple-system,BlinkMacSystemFont,'Noto Sans TC',sans-serif">
          LINE
        </text>
      </svg>
    </div>
  </a>

  <!-- LINE å°å¡ç‰‡ -->
  <div id="lineModalOverlay" class="line-modal-overlay" aria-hidden="true">
    <div class="line-modal" role="dialog" aria-modal="true" aria-labelledby="lineModalTitle">
      <div class="line-modal-header">
        <div class="line-modal-header-left">
          <div class="line-modal-logo-circle">LINE</div>
          <div id="lineModalTitle">è·¯æ˜“æ–¯ LINE å®¢æœ</div>
        </div>
        <button type="button" class="line-modal-close" aria-label="é—œé–‰">Ã—</button>
      </div>
      <div class="line-modal-body">
        <img
          class="line-modal-qr"
          src="https://raw.githubusercontent.com/h7860118/lyrics-space/main/line_oa_chat_210222_223854.jpg"
          alt="åŠ å…¥ LINE å¥½å‹ QR Code"
        />
        <a class="line-modal-link"
           href="https://lin.ee/aAgocM5"
           target="_blank"
           rel="noopener">
          https://lin.ee/aAgocM5
        </a>
      </div>
    </div>
  </div>

  <!-- LINE æŒ‰éˆ•äº’å‹• -->
  <script>
    const lineFab         = document.getElementById("lineFab");
    const lineOverlay     = document.getElementById("lineModalOverlay");
    const lineCloseButton = document.querySelector(".line-modal-close");

    function openLineModal() {
      if (!lineOverlay) {
        window.open("https://lin.ee/aAgocM5", "_blank");
        return;
      }
      lineOverlay.style.display = "flex";
      lineOverlay.setAttribute("aria-hidden", "false");
    }

    function closeLineModal() {
      if (!lineOverlay) return;
      lineOverlay.style.display = "none";
      lineOverlay.setAttribute("aria-hidden", "true");
    }

    if (lineFab) {
      lineFab.addEventListener("click", (e) => {
        e.preventDefault();
        openLineModal();
      });
    }

    if (lineCloseButton) {
      lineCloseButton.addEventListener("click", closeLineModal);
    }

    if (lineOverlay) {
      lineOverlay.addEventListener("click", (e) => {
        if (e.target === lineOverlay) {
          closeLineModal();
        }
      });
    }
  </script>

  <!-- CSV æœå°‹åŠŸèƒ½ -->
  <script>
    const CSV_URL =
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vSOihjh1ceJIGyQQ49iBMcJoNS8Xqq_NW7nQVQ8gSQ89Hgo2yk4CA2fUNJjIEEdzqkcz2_2WfKlCQtV/pub?output=csv";

    let songs = [];

    const statusEl  = document.getElementById("status");
    const resultsEl = document.getElementById("results");
    const searchEl  = document.getElementById("keyword");

    async function loadCSV() {
      statusEl.textContent = "æ­£åœ¨è¼‰å…¥è³‡æ–™â€¦";

      try {
        const res = await fetch(CSV_URL);
        const text = await res.text();

        songs = text.split(/\r?\n/).slice(1)
          .map(line => {
            const c = line.split(",");
            return {
              title:      c[0]?.trim(),
              productUrl: c[1]?.trim(),
              youtubeUrl: c[2]?.trim()
            };
          })
          .filter(s => s.title);

        statusEl.textContent = `è³‡æ–™è¼‰å…¥å®Œæˆï¼Œå…± ${songs.length} é¦–ã€‚`;
      } catch {
        statusEl.textContent = "è®€å–å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚";
      }
    }

    function doSearch() {
      const kw = searchEl.value.trim().toLowerCase();
      if (!kw) {
        statusEl.textContent = "è«‹å…ˆè¼¸å…¥é—œéµå­—ã€‚";
        resultsEl.innerHTML = "";
        return;
      }

      const list = songs.filter(s => s.title.toLowerCase().includes(kw));
      render(list, kw);
    }

    function render(list, kw) {
      if (!list.length) {
        statusEl.textContent = `æ‰¾ä¸åˆ°ç¬¦åˆã€Œ${kw}ã€çš„çµæœã€‚`;
        resultsEl.innerHTML = "";
        return;
      }

      statusEl.textContent = "";
      resultsEl.innerHTML =
        `<div class="result-count">æ‰¾åˆ° ${list.length} ç­†ç¬¦åˆã€Œ${kw}ã€çš„çµæœï¼š</div>` +
        list.map(s => `
          <div class="card">
            <div class="song-title">${s.title}</div>
            <div class="links">
              ${s.productUrl ? `<a href="${s.productUrl}" target="_blank">é¦–é é è¦½</a>` : ""}
              ${s.youtubeUrl ? `<a href="${s.youtubeUrl}" target="_blank">ç¤ºç¯„æ¼”å¥</a>` : ""}
            </div>
          </div>
        `).join("");
    }

    document.getElementById("searchBtn").onclick = doSearch;
    searchEl.addEventListener("keydown", e => { if (e.key === "Enter") doSearch(); });

    loadCSV();
  </script>

</body>
</html>
