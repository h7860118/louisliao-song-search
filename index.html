<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <title>è·¯æ˜“æ–¯é‹¼ç´ç¨å¥è­œæŸ¥è©¢</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "PingFang TC", "Microsoft JhengHei", sans-serif;
      background: #f5f7fb;
      color: #1f2933;
    }

    .page {
      max-width: 1100px;
      margin: 0 auto;
      padding: 32px 16px 80px;
    }

    /* â˜…â˜…â˜…â˜…â˜… æ–°å¢ï¼šæ¨™é¡Œ + å®˜ç¶²è† å›Šæ–¹å¡Š */
    .header-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 6px;
    }

    h1 {
      font-size: 28px;
      font-weight: 700;
      margin: 0;
    }

    .brand-pill {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px 9px;
      border-radius: 999px;
      background: #f4e2c9;
      color: #5b3c25;
      font-size: 15px;
      font-weight: 700;
      text-decoration: none;
      box-shadow: 0 6px 18px rgba(0,0,0,.16);
      white-space: nowrap;
      transition: transform .15s ease, box-shadow .15s ease, background .15s ease;
    }

    .brand-pill:hover {
      transform: translateY(-1px);
      box-shadow: 0 9px 22px rgba(0,0,0,.22);
      background: #faedd8;
    }

    .brand-pill-icon {
      font-size: 17px;
    }

    @media (max-width: 640px) {
      .header-row {
        flex-direction: column;
        align-items: flex-start;
      }
    }

    /* å…¶ä»–åŸå§‹æ¨£å¼ */
    .subtitle {
      font-size: 15px;
      color: #6b7280;
      margin-top: 6px;
      margin-bottom: 26px;
    }

    .search-row {
      display: flex;
      gap: 16px;
      align-items: stretch;
      margin-bottom: 16px;
      flex-wrap: wrap;
    }
    .search-input-wrap {
      flex: 1 1 260px;
      position: relative;
    }
    .search-input-wrap input {
      width: 100%;
      padding: 14px 16px;
      border-radius: 999px;
      border: 1px solid #d1d5db;
      font-size: 16px;
      outline: none;
      box-sizing: border-box;
    }
    .search-input-wrap input:focus {
      border-color: #2563eb;
      box-shadow: 0 0 0 3px rgba(37,99,235,0.2);
    }
    .search-btn {
      flex: 0 0 auto;
      padding: 0 32px;
      border-radius: 999px;
      border: none;
      background: #2563eb;
      color: #fff;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      min-width: 96px;
    }
    .tip {
      font-size: 13px;
      color: #6b7280;
      margin-bottom: 24px;
    }
    .status {
      font-size: 14px;
      color: #6b7280;
      margin-top: 8px;
    }
    .results {
      margin-top: 8px;
    }
    .result-count {
      font-size: 14px;
      color: #4b5563;
      margin-bottom: 8px;
    }
    .card {
      background: #fff;
      border-radius: 12px;
      padding: 14px 16px;
      margin-bottom: 10px;
      box-shadow: 0 6px 18px rgba(15,23,42,0.06);
      border: 1px solid #e5e7eb;
    }
    .song-title {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 6px;
    }
    .links a {
      font-size: 14px;
      color: #2563eb;
      text-decoration: none;
      margin-right: 12px;
    }

    /* ---------- LINE å°æŒ‰éˆ•æ¨£å¼ ---------- */
    #lineFab {
      position: fixed;
      right: 22px;
      bottom: 22px;
      width: 70px;
      height: 70px;
      background: #06c755;
      border-radius: 50%;
      cursor: pointer;
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 25px rgba(0,0,0,0.15);
      transition: transform 0.2s ease;
    }
    #lineFab:hover {
      transform: scale(1.07);
    }
    #lineFab svg {
      width: 46px;
      height: 46px;
      display: block;
    }

    #lineModalBg {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.45);
      display: none;
      z-index: 9998;
    }
    #lineModal {
      width: 380px;
      background: white;
      border-radius: 18px;
      overflow: hidden;
      box-shadow: 0 15px 40px rgba(0,0,0,0.25);
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      display: none;
      z-index: 9999;
    }
    #lineModalHeader {
      background: #06c755;
      color: white;
      padding: 14px 20px;
      font-size: 20px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    #lineModalBody {
      padding: 22px;
      text-align: center;
    }
    #lineModalBody img {
      width: 220px;
      margin-bottom: 16px;
    }
    #lineModalClose {
      cursor: pointer;
      font-size: 22px;
      font-weight: 700;
    }
  </style>
</head>

<body>
  <div class="page">
    
    <!-- â˜…â˜…â˜…â˜…â˜… æ–°å¢ï¼šæ¨™é¡Œ + å®˜ç¶²è† å›ŠæŒ‰éˆ• -->
    <div class="header-row">
      <h1>è·¯æ˜“æ–¯é‹¼ç´ç¨å¥è­œæŸ¥è©¢</h1>
      <a class="brand-pill" href="https://louisliaopiano.com" target="_blank" rel="noopener">
        <span class="brand-pill-icon">â™ª</span>
        <span>LouisLiao Piano é‹¼ç´ç·¨æ›²</span>
      </a>
    </div>

    <div class="subtitle">
      è¼¸å…¥æ­Œåæˆ–æ¼”å”±è€…çš„ä¸€éƒ¨åˆ†å³å¯æ¨¡ç³Šæœå°‹ï¼Œä¾‹å¦‚ã€Œç«¥è©±ã€ã€Œå…‰è‰¯ã€ã€Œæ¶¼æ¶¼ã€ç­‰ã€‚
    </div>

    <!-- æœå°‹å€ -->
    <div class="search-row">
      <div class="search-input-wrap">
        <input id="keyword" type="text" placeholder="è¼¸å…¥æ­Œåï¼æ¼”å”±è€…é—œéµå­—â€¦" />
      </div>
      <button id="searchBtn" class="search-btn">æœå°‹</button>
    </div>

    <div class="tip">
      ğŸ” å°ç§˜è¨£ï¼šå¯ä»¥ç”¨æ­Œåã€æ­Œæ‰‹ã€æˆ–éƒ¨åˆ†é—œéµå­—ä¾†æ‰¾ï¼Œä¾‹å¦‚ã€Œè˜‡æ°¸åº·ã€ã€Œé‡å›å‚·å¿ƒåœ°ã€ã€‚
    </div>

    <div id="status" class="status">ç›®å‰è¼‰å…¥ä¸­â€¦</div>
    <div id="results" class="results"></div>
  </div>

  <!-- ğŸŸ¢ LINE æŒ‰éˆ• -->
  <div id="lineFab">
    <svg viewBox="0 0 64 64" aria-hidden="true">
      <path d="M32 12C21 12 12 19.5 12 29c0 7.2 5.4 13.2 13.5 14.7L26 52l7.2-5.4C44 45.9 52 38.2 52 29 52 19.5 43 12 32 12z" fill="#fff"/>
      <text x="32" y="32" text-anchor="middle" font-size="14" font-weight="700" fill="#06c755">LINE</text>
    </svg>
  </div>

  <div id="lineModalBg"></div>

  <div id="lineModal">
    <div id="lineModalHeader">
      <span>LINE</span>
      <span id="lineModalClose" style="cursor:pointer;">Ã—</span>
    </div>
    <div id="lineModalBody">
      <img src="https://raw.githubusercontent.com/h7860118/lyrics-space/main/line_oa_chat_210222_223854.jpg">
      <a href="https://lin.ee/aAgocM5" target="_blank">https://lin.ee/aAgocM5</a>
    </div>
  </div>

  <script>
    // LINE Modal æ§åˆ¶
    const lineFab       = document.getElementById("lineFab");
    const lineModalBg   = document.getElementById("lineModalBg");
    const lineModal     = document.getElementById("lineModal");
    const lineModalClose= document.getElementById("lineModalClose");

    lineFab.onclick = () => {
      lineModalBg.style.display = "block";
      lineModal.style.display   = "block";
    };
    lineModalBg.onclick    = () => { lineModalBg.style.display = lineModal.style.display = "none"; };
    lineModalClose.onclick = () => { lineModalBg.style.display = lineModal.style.display = "none"; };
  </script>

  <!-- è®€å– CSV -->
  <script>
    const CSV_URL =
      "https://docs.google.com/spreadsheets/d/e/2PACX-1vSOihjh1ceJIGyQQ49iBMcJoNS8Xqq_NW7nQVQ8gSQ89Hgo2yk4CA2fUNJjIEEdzqkcz2_2WfKlCQtV/pub?output=csv";

    let songs = [];
    const statusEl  = document.getElementById("status");
    const resultsEl = document.getElementById("results");
    const searchInput = document.getElementById("keyword");
    const searchBtn   = document.getElementById("searchBtn");

    async function loadCSV() {
      try {
        statusEl.textContent = "æ­£åœ¨è¼‰å…¥è³‡æ–™â€¦";
        const res = await fetch(CSV_URL);
        const text = await res.text();

        songs = text.split(/\r?\n/).slice(1)
          .map(line => {
            const c = line.split(",");
            return {
              title: c[0]?.trim(),
              productUrl: c[1]?.trim(),
              youtubeUrl: c[2]?.trim()
            }
          })
          .filter(s => s.title);

        statusEl.textContent = `è³‡æ–™è¼‰å…¥å®Œæˆï¼Œå…± ${songs.length} é¦–ã€‚`;
      } catch {
        statusEl.textContent = "è³‡æ–™è®€å–å¤±æ•—ï¼Œè«‹ç¨å¾Œå†è©¦ã€‚";
      }
    }

    function doSearch() {
      const kw = searchInput.value.trim().toLowerCase();
      if (!kw) {
        statusEl.textContent = "è«‹å…ˆè¼¸å…¥é—œéµå­—ã€‚";
        resultsEl.innerHTML = "";
        return;
      }

      const list = songs.filter(s => s.title.toLowerCase().includes(kw));
      render(list, kw);
    }

    function render(list, kw) {
      if (!list.length) {
        statusEl.textContent = `æ‰¾ä¸åˆ°ç¬¦åˆã€Œ${kw}ã€çš„çµæœã€‚`;
        resultsEl.innerHTML = "";
        return;
      }

      statusEl.textContent = "";
      resultsEl.innerHTML =
        `<div class="result-count">æ‰¾åˆ° ${list.length} ç­†ç¬¦åˆã€Œ${kw}ã€çš„çµæœï¼š</div>` +
        list.map(s => `
          <div class="card">
            <div class="song-title">${s.title}</div>
            <div class="links">
              ${s.productUrl ? `<a href="${s.productUrl}" target="_blank">é¦–é é è¦½</a>` : ""}
              ${s.youtubeUrl ? `<a href="${s.youtubeUrl}" target="_blank">ç¤ºç¯„æ¼”å¥</a>` : ""}
            </div>
          </div>
        `).join("");
    }

    searchBtn.onclick = doSearch;
    searchInput.addEventListener("keydown", e => e.key === "Enter" && doSearch());

    loadCSV();
  </script>

</body>
</html>
